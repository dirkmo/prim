:0= [ if ] 0 [ else ] $ffff [ then ] ;
:0<> [ if ] $ffff [ else ] 0 [ then ] ;
:tx $ffff c! ;
:rx 1 [ while ] $fffe c@ 0= [ repeat ] $ffff c@ ;

:wordcall ;
:wordaddr ;
:number ;
:string ;
:mnemonic ;
:buildin ;
:litnum ;
:litstr ;
:definition ;
:mode ;
:commentbraces ;
:commentbackslash ;
:whitespace ;

:jumptable
'wordcall           jp
'wordaddr           jp
'number             jp
'string             jp
'mnemonic           jp
'buildin            jp
'litnum             jp
'litstr             jp
'definition         jp
'mode               jp
'commentbraces      jp
'commentbackslash   jp
'whitespace         jp

:interpreter
    rx                      \ get token
    sl sl 'jumptable + call \ jump table call
;

[
0x21 0 c! 'interpreter 1 !
1 3 c!                      \ call
0x22 4 c!                   \ break
]
